---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: themis-fe
  namespace: met
spec:
  values:
    nodejs:
      environment:
        THEMIS_GATEWAY_LISTENERSENDERID: Themis_DAC
        THEMIS_GATEWAY_WRITERSENDERID: Themis_GW
        THEMIS_GATEWAY_PERSISTMESSAGEAUDITCONTENTFORNONUIFLOW: true
        THEMIS_GATEWAY_RESPONSESMAXCONCURRENTPROCESSED: 20
        THEMIS_GATEWAY_CONNECTIONTIMEOUT: 720000
        THEMIS_GATEWAY_RECEIVETIMEOUT: 720000
        THEMIS_GATEWAY_MESSAGEAUDITSUPPRESSION: OFF
        THEMIS_GATEWAY_WRITERQUEUENAME: LIBRAGOB_WRITERQUEUE
        THEMIS_GATEWAY_LISTENERQUEUENAME: LIBRAGOB_READERQUEUE
        THEMIS_GATEWAY_HOLDERCLEANUPCRON: 0 0,30 * * * ?
        THEMIS_GATEWAY_JKSLOCATION: /opt/jks/ThemisAzureKeyStore.jks
        DAC_KEY_EXPIRE_TIME_SECONDS: 1800
        DAC_NUMBER_OF_INSTANCES: 5
        CONFISCATION_SCHEMAS: 110,45,97,116,66,109
        MAINTENANCE_SCHEMAS: 111,67,44
        THEMIS_DAC_LISTENERSENDERID: Themis_GW
        THEMIS_DAC_LISTENERQUEUENAME: LIBRAGOB_WRITERQUEUE
        THEMIS_DAC_WRITERQUEUENAME: LIBRAGOB_READERQUEUE
        SPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY-SOURCES[0]_ENDPOINT: https://libragob-test-kv.vault.azure.net/
        SPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY-SOURCES[0]_CREDENTIAL_MANAGED-IDENTITY-ENABLED: true
        SPRING_CLOUD_AZURE_KEYVAULT_SECRET_PROPERTY-SOURCES[0]_CREDENTIAL_CLIENT-ID: f50fe277-9215-4519-a1d4-8b88e8f7cb92
        SPRING_JMS_SERVICEBUS_CONNECTION-STRING: https://libragob-test.servicebus.windows.net:443/
        SPRING_JMS_SERVICEBUS_IDLE-timeout: 30000
        SPRING_CLOUD_AZURE_CLIENT-ID: f50fe277-9215-4519-a1d4-8b88e8f7cb92
        SPRING_CLOUD_AZURE_SERVICEBUS_NAMESPACE: https://libragob-test.servicebus.windows.net:443/
      keyVaults:
        libragob-test-kv:
          excludeEnvironmentSuffix: true
          secrets:
            - db-connection-url-ThemisGatewayDS
            - db-connection-url-ThemisDacDS
            - db-connection-url-dasDS
            - db-connection-url-confDS
            - db-connection-url-finesDS
            - db-connection-url-maintenanceDS
            - db-connection-url-ThemisJmsDS