apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: pip-frontend
  namespace: pip
spec:
  releaseName: pip-frontend
  values:
    nodejs:
      ingressHost: pip-frontend.test.platform.hmcts.net
      keyVaults:
        pip-ss-kv:
          resourceGroup: pip-ss-test-rg
          secrets:
            - name: session-key
              alias: SESSION_SECRET
            - name: auto-pip-<ENV>-pip-frontend-<ENV>-id
              alias: CLIENT_ID
            - name: auto-pip-<ENV>-pip-frontend-<ENV>-pwd
              alias: CLIENT_SECRET
            - name: b2c-config-endpoint
              alias: CONFIG_ENDPOINT
            - name: b2c-config-admin-endpoint
              alias: CONFIG_ADMIN_ENDPOINT
            - name: b2c-tenant-id
              alias: TENANT_GUID
            - name: shared-storageaccount-connection-string
              alias: CONNECTION_STRING
            - name: REDIS-V6-HOST
              alias: REDIS_HOST
            - name: REDIS-V6-PASSWORD
              alias: REDIS_PASSWORD
            - name: REDIS-V6-PORT
              alias: REDIS_PORT
            - name: b2c-auth-endpoint
              alias: B2C_AUTH_ENDPOINT
            - name: app-pip-frontend-id
              alias: CLIENT_ID_INTERNAL
            - name: app-pip-frontend-pwd
              alias: CLIENT_SECRET_INTERNAL
            - name: app-tenant-id
              alias: TENANT_ID
            - name: app-pip-data-management-scope
              alias: DATA_MANAGEMENT_AZ_API
            - name: app-pip-subscription-management-scope
              alias: SUBSCRIPTION_MANAGEMENT_AZ_API
            - name: app-pip-account-management-scope
              alias: ACCOUNT_MANAGEMENT_AZ_API
            - name: app-pip-channel-management-scope
              alias: CHANNEL_MANAGEMENT_AZ_API
            - name: app-insights-nodejs-instrumentation-key
              alias: INSTRUMENTATION_KEY
            - name: b2c-url
              alias: B2C_URL
            - name: cft-idam-client-secret
              alias: CFT_IDAM_CLIENT_SECRET
      environment:
        DATA_MANAGEMENT_URL: https://pip-data-management.test.platform.hmcts.net
        ACCOUNT_MANAGEMENT_URL: https://pip-account-management.test.platform.hmcts.net
        CHANNEL_MANAGEMENT_URL: https://pip-channel-management.test.platform.hmcts.net
        SUBSCRIPTION_MANAGEMENT_URL: https://pip-subscription-management.test.platform.hmcts.net
        AUTH_RETURN_URL: https://pip-frontend.test.platform.hmcts.net/login/return
        MEDIA_VERIFICATION_RETURN_URL: https://pip-frontend.test.platform.hmcts.net/media-verification/return
        ADMIN_AUTH_RETURN_URL: https://pip-frontend.test.platform.hmcts.net/login/admin/return
        FRONTEND_URL: https://pip-frontend.test.platform.hmcts.net
        CFT_IDAM_URL: https://idam-web-public.perftest.platform.hmcts.net
        ENABLE_CFT: true
