apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: pre-api-cron-vodafone-etl-post-migration
  namespace: pre
spec:
  values:
    global:
      jobKind: CronJob
    job:
      schedule: "40 12 22 10 *" # 1.40 PM BST - 22 Oct
      suspend: false
      memoryRequests: '1Gi'
      memoryLimits: '2Gi'
      image: sdshmctspublic.azurecr.io/pre/api:prod-d660c92-20260112155926 # {"$imagepolicy": "flux-system:pre-api"}
      environment:
        AZURE_SUBSCRIPTION_ID: 74dacd4f-a248-45bb-a2f0-af700dc4cf68
        PLATFORM_ENV_TAG: Staging
        MEDIA_SERVICE: MediaKind
        ENABLE_NEW_EMAIL_SERVICE: true
        MEDIA_KIND_SUBSCRIPTION: pre-mkio-stg
        MEDIA_KIND_SUBSCRIPTION_ID: 36a78cf2-290d-4621-b974-eda4a570ef70
        MEDIA_KIND_LOCATION: uksouth-4
