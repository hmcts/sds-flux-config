apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: pre-api-cron-vodafone-mk-import
  namespace: pre
spec:
  values:
    global:
      jobKind: CronJob
    job:
      schedule: "15 11 29 9 *" # 11.15 am 29th Sep UTC (12.15pm BST)
      suspend: false
      memoryRequests: '1Gi'
      memoryLimits: '2Gi'
      image: sdshmctspublic.azurecr.io/pre/api:prod-47fada0-20250929120318 # {"$imagepolicy": "flux-system:pre-api"}
      environment:
        MEDIA_SERVICE: MediaKind
        ENABLE_NEW_EMAIL_SERVICE: true
        PORTAL_URL: https://portal.pre-recorded-evidence.justice.gov.uk/
        TASK_BATCH_IMPORT_MISSING_ASSETS_BATCH_SIZE: 75
